<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Famous City üéÑ Contagem Regressiva</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Roboto Mono', monospace;
      background: url('https://i.pinimg.com/originals/8c/44/7a/8c447a7f52903b9b3a68839e67b76cf3.jpg') no-repeat center center fixed;
      background-size: cover;
      overflow: hidden;
      color: white;
      text-align: center;
    }

    .neon-text {
      color: #fff;
      text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 30px #ff66ff;
    }

    #snowCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    #gearIcon {
      position: fixed;
      top: 20px;
      right: 20px;
      cursor: pointer;
      z-index: 10;
      filter: drop-shadow(0 0 5px white);
    }

    #loginPanel, #adminPanel {
      display: none;
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 15px;
      width: 90%;
      max-width: 300px;
      margin: 0 auto;
      position: relative;
      z-index: 5;
    }

    input {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 8px;
      border-radius: 5px;
      border: none;
    }

    button {
      background-color: #ff007f;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 8px 12px;
      margin-top: 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #ff4fa1;
    }

    audio { display: none; }

    /* Chap√©u animado */
    .relative-title { position: relative; display: inline-block; }
    .animate-hat {
      position: absolute;
      top: -6;
      left: 0;
      width: 48px;
      height: 48px;
      transform-origin: bottom left;
      animation: swing 2s infinite ease-in-out;
    }

    @keyframes swing {
      0% { transform: rotate(-15deg); }
      50% { transform: rotate(15deg); }
      100% { transform: rotate(-15deg); }
    }
  </style>
</head>
<body>
  <canvas id="snowCanvas"></canvas>

  <!-- Engrenagem -->
  <svg id="gearIcon" xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="white" viewBox="0 0 24 24">
    <path d="M19.14 12.94a7.07 7.07 0 000-1.88l2.03-1.58a.5.5 0 00.12-.63l-1.92-3.32a.5.5 0 00-.6-.22l-2.39.96a7.13 7.13 0 00-1.63-.95l-.36-2.54A.5.5 0 0014.9 2h-3.8a.5.5 0 00-.49.41l-.36 2.54a7.13 7.13 0 00-1.63.95l-2.39-.96a.5.5 0 00-.6.22L3.81 8.85a.5.5 0 00.12.63l2.03 1.58a7.07 7.07 0 000 1.88l-2.03 1.58a.5.5 0 00-.12.63l1.92 3.32a.5.5 0 00.6.22l2.39-.96a7.13 7.13 0 001.63.95l.36 2.54a.5.5 0 00.49.41h3.8a.5.5 0 00.49-.41l.36-2.54a7.13 7.13 0 001.63-.95l2.39.96a.5.5 0 00.6-.22l1.92-3.32a.5.5 0 00-.12-.63l-2.03-1.58zM12 15.5A3.5 3.5 0 1115.5 12 3.5 3.5 0 0112 15.5z"/>
  </svg>

  <div class="relative z-5 mt-24">
    <!-- T√≠tulo com chap√©u -->
    <div class="relative-title mb-2">
      <h1 class="text-4xl md:text-6xl font-bold neon-text inline-block">Famous City</h1>
      <img src="https://cdn-icons-png.flaticon.com/512/2583/2583344.png" 
           alt="Santa Hat" class="animate-hat" />
    </div>
    <p class="text-xl md:text-2xl text-cyan-300 mb-8">Contagem Regressiva ‚òÉÔ∏è</p>

    <!-- Contagem regressiva -->
    <div class="grid grid-cols-4 gap-4 md:gap-8 mb-12">
      <div><div id="days" class="text-5xl md:text-8xl font-mono font-bold text-purple-400">00</div><div class="text-lg md:text-xl text-cyan-300">DIAS</div></div>
      <div><div id="hours" class="text-5xl md:text-8xl font-mono font-bold text-blue-400">00</div><div class="text-lg md:text-xl text-cyan-300">HORAS</div></div>
      <div><div id="minutes" class="text-5xl md:text-8xl font-mono font-bold text-green-400">00</div><div class="text-lg md:text-xl text-cyan-300">MINUTOS</div></div>
      <div><div id="seconds" class="text-5xl md:text-8xl font-mono font-bold text-yellow-400">00</div><div class="text-lg md:text-xl text-cyan-300">SEGUNDOS</div></div>
    </div>

    <!-- Login admin -->
    <div id="loginPanel">
      <h2 class="text-xl font-bold mb-2">Login de Administrador</h2>
      <input type="text" id="username" placeholder="Usu√°rio" />
      <input type="password" id="password" placeholder="Senha" />
      <button onclick="login()">Entrar</button>
    </div>

    <!-- Painel admin -->
    <div id="adminPanel">
      <h2 class="text-xl font-bold mb-2">Painel do Admin</h2>
      <button onclick="adicionarMusica()">Adicionar M√∫sica</button>
      <button onclick="trocarFundo()">Trocar Fundo</button>
      <button onclick="logout()">Sair</button>
    </div>
  </div>

  <audio id="backgroundSound" loop>
    <source src="https://cdn.pixabay.com/audio/2022/12/02/audio_02c8b9d3d1.mp3" type="audio/mpeg">
  </audio>
  <audio id="clockTick" loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/01/03/audio_bbbf2a52bb.mp3?filename=clock-ticking-ambient-13267.mp3" type="audio/mpeg">
  </audio>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCiq9bp2URA4txauF9-2QKrX52VlSRnpEQ",
      authDomain: "contagem-regressiva-natal.firebaseapp.com",
      databaseURL: "https://contagem-regressiva-natal-default-rtdb.firebaseio.com",
      projectId: "contagem-regressiva-natal",
      storageBucket: "contagem-regressiva-natal.firebasestorage.app",
      messagingSenderId: "995036629581",
      appId: "1:995036629581:web:ee895d3906b7e01142aa04"
    };
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Engrenagem mostra login
    const gear = document.getElementById("gearIcon");
    gear.addEventListener("click", () => {
      const login = document.getElementById("loginPanel");
      login.style.display = login.style.display === "none" || login.style.display === "" ? "block" : "none";
    });

    function login() {
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;
      if (user === "admin" && pass === "1234") {
        document.getElementById("loginPanel").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
      } else { alert("Usu√°rio ou senha incorretos!"); }
    }

    function logout() { document.getElementById("adminPanel").style.display = "none"; }

    function adicionarMusica() {
      const url = prompt("URL da m√∫sica (mp3):");
      if (url) set(ref(db, "config/musica"), url);
    }
    function trocarFundo() {
      const url = prompt("URL do novo fundo:");
      if (url) set(ref(db, "config/fundo"), url);
    }

    onValue(ref(db, "config"), (snapshot) => {
      const data = snapshot.val();
      if (data?.fundo) document.body.style.backgroundImage = `url('${data.fundo}')`;
      if (data?.musica) {
        const music = document.getElementById("backgroundSound");
        music.src = data.musica;
        music.play();
      }
    });

    // Contagem regressiva
    const targetDate = new Date("Dec 25, 2025 00:00:00").getTime();
    setInterval(() => {
      const now = new Date().getTime();
      const diff = targetDate - now;
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
      const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
      const seconds = Math.floor((diff % (1000*60)) / 1000);
      document.getElementById("days").textContent = days.toString().padStart(2,'0');
      document.getElementById("hours").textContent = hours.toString().padStart(2,'0');
      document.getElementById("minutes").textContent = minutes.toString().padStart(2,'0');
      document.getElementById("seconds").textContent = seconds.toString().padStart(2,'0');
    },1000);

    // Sons
    const clockSound = document.getElementById("clockTick");
    const bgSound = document.getElementById("backgroundSound");
    clockSound.volume = 0.3; bgSound.volume = 0.2;
    clockSound.play(); bgSound.play();

    // Neve
    const canvas = document.getElementById("snowCanvas");
    const ctx = canvas.getContext("2d");
    let flakes = [];
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener("resize", resize); resize();
    for(let i=0;i<100;i++) flakes.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*4+1, d:Math.random()});
    function drawSnow(){ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle="white"; ctx.beginPath(); for(let i=0;i<flakes.length;i++){ const f=flakes[i]; ctx.moveTo(f.x,f.y); ctx.arc(f.x,f.y,f.r,0,Math.PI*2,true);} ctx.fill(); updateSnow(); }
    function updateSnow(){ for(let i=0;i<flakes.length;i++){ const f=flakes[i]; f.y += Math.pow(f.d,2)+1; if(f.y>canvas.height){ flakes[i]={x:Math.random()*canvas.width,y:0,r:f.r,d:f.d}; } } }
    setInterval(drawSnow,33);

  </script>
</body>
</html>
